accelerator:
  displayName: Spring Java OpenAPI
  description: A sample Spring-based application in Java with OpenAPI endpoints
  iconUrl: https://avatars.githubusercontent.com/u/86276554?s=200&v=4
  tags:
    - java
    - spring
    - openapi
    - swagger
    - maven

  options:
    - name: artifactId
      label: Artifact ID
      description: Application Artifact Name
      required: true
      dataType: string
      inputType: text
      defaultValue: chachkies-api
    - name: generatedApiFilesPackage
      label: OpenAPI Package
      description: Package of the files generated by OpenAPI
      required: true
      dataType: string
      inputType: text
      defaultValue: "io.microsamples.accelerator.chachkies"
    - name: apiSuffix
      label: OpenAPI Suffix
      description: Suffix to be used for classes generated by OpenAPI
      required: false
      dataType: string
      inputType: text
      defaultValue: Api

engine:
  merge:
    - include: [ "**" ]
    - include: [ "kubernetes/*.yaml", "skaffold.yaml", "pom.xml", "skaffold.yaml" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: chachkies-api
              with: "#artifactId"
    - include: [ "src/main/java/**/Application.kt" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: "io.microsamples.accelerator.chachkies.api"
              with: "#generatedApiFilesPackage + '.api'"
    - include: [ "pom.xml", "src/main/resources/application.yml" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: "io.microsamples.accelerator.chachkies"
              with: "#generatedApiFilesPackage"
            - text: Chachkie
              with: "#apiSuffix"
    - include: [ "src/main/java/**/ChachkiesApiImpl.java" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: "import io.microsamples.accelerator.chachkies"
              with: "'import ' + #generatedApiFilesPackage"
            - text: "ChachkiesApi"
              with: "'Chachkies' + #apiSuffix"
